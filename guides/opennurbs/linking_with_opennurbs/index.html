<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Linking with openNURBS</title>
  <meta name="description" content="Linking with openNURBS">

  <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/github.min.css">
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/languages/vbnet.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <!-- Overridden theme -->
  <link rel="stylesheet" href="/developer-rhino3d-com-branches/css/main.css">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
  <!-- Bootstrap override -->
  <link rel="stylesheet" href="/developer-rhino3d-com-branches/css/bootstrap-override.css">

  <link rel="canonical" href="http://mcneel.github.io/developer-rhino3d-com-branches/developer-rhino3d-com-branches/guides/opennurbs/linking_with_opennurbs/">
  <link rel="alternate" type="application/rss+xml" title="Rhino Developer Docs" href="http://mcneel.github.io/developer-rhino3d-com-branches/developer-rhino3d-com-branches/feed.xml" />

  <link rel="shortcut icon" href="http://developer.rhino3d.com/favicon.ico?v=2" />
  <!-- Saving bookmarks to mobile devices -->
  <!-- For non-Retina (@1× display) iPhone, iPod Touch, and Android 2.1+ devices: -->
  <link rel="apple-touch-icon-precomposed" href="/developer-rhino3d-com-branches/images/apple-touch-icon-precomposed.png"><!-- 57×57px -->
  <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/developer-rhino3d-com-branches/images/apple-touch-icon-72x72-precomposed.png">
  <!-- For the iPad mini and the first- and second-generation iPad (@1× display) on iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="/developer-rhino3d-com-branches/images/apple-touch-icon-76x76-precomposed.png">
  <!-- For iPhone with @2× display running iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/developer-rhino3d-com-branches/images/apple-touch-icon-114x114-precomposed.png">
  <!-- For iPhone with @2× display running iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/developer-rhino3d-com-branches/images/apple-touch-icon-120x120-precomposed.png">
  <!-- For iPad with @2× display running iOS ≤ 6: -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/developer-rhino3d-com-branches/images/apple-touch-icon-144x144-precomposed.png">
  <!-- For iPad with @2× display running iOS ≥ 7: -->
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/developer-rhino3d-com-branches/images/apple-touch-icon-152x152-precomposed.png">
  <!-- For iPhone 6 Plus with @3× display: -->
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="/developer-rhino3d-com-branches/images/apple-touch-icon-180x180-precomposed.png">
  <!-- For Chrome for Android: -->
  <link rel="icon" sizes="192x192" href="images/touch-icon-192x192.png">

</head>


  <body>

    <!-- Google Tag Manager **This belongs right after the <body> tag**-->
    <noscript>
        <iframe src="//www.googletagmanager.com/ns.html?id=GTM-MWMDKN"
        height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MWMDKN');
    </script>
    <!-- End Google Tag Manager -->


    <div class="container">
      <header class="site-header">


    <a class="site-title" href="/developer-rhino3d-com-branches/"><img src="/developer-rhino3d-com-branches/images/rhinodevlogo148x128.png" alt="Rhino Developer Docs" height="48" width="56"></a><a class="site-title" href="/developer-rhino3d-com-branches/">Rhino Developer Docs</a>

    <nav class="site-nav">
      <img class="menu-icon" src="/developer-rhino3d-com-branches/images/gi.svg">
      
      <div class="trigger">
      	<!--<a class="page-link" href="/developer-rhino3d-com-branches/">Welcome</a>-->
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
            
              
            
          
        
          
        
          
            
              
                <a class="page-link" href="/developer-rhino3d-com-branches/guides/">Guides</a>
              
            
          
        
          
            
              
                <a class="page-link" href="/developer-rhino3d-com-branches/api/">API</a>
              
            
          
        
          
            
              
                <a class="page-link" href="/developer-rhino3d-com-branches/samples/">Samples</a>
              
            
          
        
          
            
          
        
        <a class="page-link" href="http://discourse.mcneel.com/c/rhino-developer">Forums</a>
        <!-- Google Search Engine -->
        <!-- TODO Move to this site back into the Mcneel search, or use a simple site only search for results -->
        <div id="sitesearch">
            <!-- Google CSE Search Box Begins  -->
            <!-- Use of this code assumes agreement with the Google Custom Search Terms of Service. -->
            <!-- The terms of service are available at https://www.google.com/cse/docs/tos.html -->
            <form id="cref" action="/developer-rhino3d-com-branches/search-results.html">
                <input type="hidden" name="cref" value="007988927381198593803:mcq6pshqsn8" />
                <input id="searchtext" type="text" name="q" size="24" value="" placeholder="search" />
                <input class="searchBox" type="submit" name="sa" size="2" value=" " />
            </form>
        <!-- Google CSE Search Box Ends -->
        </div>
        <!--End of Google Search Engine -->
      </div>
    </nav>

</header>


      <div class="page-content">
        

        <!--div class="wrapper"-->
          <div class="container-fluid">

<div class="row-fluid">
    <!--Nav Bar -->
    <nav class="col-xs-0 col-md-3 bs-docs-sidebar">
        <ul id="sidebar" class="nav nav-stacked fixed">

          <li>
            <a href="/developer-rhino3d-com-branches/guides/">Guides</a>

            <ul class="nav nav-stacked">

              <li>

                
                  <a href="/developer-rhino3d-com-branches/guides/#opennurbs">openNURBS</a>
                
                <ul class="nav nav-stacked">

                  <!-- Find the h1 handle for title -->
                  
                  
                  
                  
                  
                  
                  
                  <li>
                    <a href="#linking-with-opennurbs">Linking with openNURBS</a>

                    <ul class="nav nav-stacked">

                      <!-- Find the h2 group and any h3 subgroups -->
                      

                      
                        
                        
                        
                        
                        
                        <li>
                          <a href="#problem">Problem</a>

                          

                        </li>
                      
                        
                        
                        
                        
                        
                        <li>
                          <a href="#solution">Solution</a>

                          

                        </li>
                      
                        
                        
                        
                        
                        
                        <li>
                          <a href="#sample">Sample</a>

                          
                            <ul class="nav nav-stacked">
                              

                              
                                
                                
                                
                                
                                
                                <li>
                                    <a href="#opennurbsstaticlinkingh">opennurbs_static_linking.h</a>
                                </li>
                              
                                
                                
                                
                                
                                
                                <li>
                                    <a href="#opennurbsdynamiclinkingh">opennurbs_dynamic_linking.h</a>
                                </li>
                              

                            </ul>
                          

                        </li>
                      

                    </ul>

                  </li>

                </ul>

              </li>

            </ul>

          </li>

        </ul>
    </nav>
    <!--Main Content -->
    <div class="col-xs-12 col-md-9">
      <!--<div class="post">-->

        <article class="post-content">
          <h1 id="linking-with-opennurbs">Linking with openNURBS</h1>

<p>This guide discusses openNURBS linking.</p>

<h2 id="problem">Problem</h2>

<p>You are trying to write a simple console application like the <em>example_write</em> sample included with the openNURBS toolkit.  However, you are having problems linking.  You are using the <em>opennurbs_staticlib_linking_pragmas.h</em> header included with openNURBS, but it does not seem to work.</p>

<h2 id="solution">Solution</h2>

<p>The <em>opennurbs_staticlib_linking_pragmas.h</em> header, included with openNURBS, is only designed to help build the example projects included with the toolkit.  That is, it only works if your project is inside the openNURBS folder.</p>

<p>Unlike the <code class="highlighter-rouge">#include</code> statement, <code class="highlighter-rouge">#pragma</code> statements, used in this header, are not very path smart.  The library paths used by <code class="highlighter-rouge">#pragma</code> statement must be relative to the project, not the <code class="highlighter-rouge">#include</code> file in which it is used.</p>

<p>You certainly don’t have to use <em>opennurbs_staticlib_linking_pragmas.h</em> in your project.  You can always add the required openNURBS libraries to your project’s <em>Additional Dependencies</em> link settings.  You can also just include the required libraries in your project, like you would a <em>.cpp</em> or <em>.h</em> file.</p>

<p>But, if you like the flexibility that providing linking instructions via <code class="highlighter-rouge">#pragma</code> statements provide, then you can always change <em>opennurbs_staticlib_linking_pragmas.h</em> to reflect the path to your project.  That said, if you use openNURBS in more than one project and the projects are not all stored in the same relative location, this will not work.</p>

<h2 id="sample">Sample</h2>

<p>Below is sample that contains two header files that you can include in any project that needs to link with openNURBS.  One of the headers provides instruction for statically linking openNURBS, and the other one for dynamically linking.  Once these files are included in your project, you can edit them to reflect your project’s relative path to the openNURBS toolkit.</p>

<h3 id="opennurbsstaticlinkingh">opennurbs_static_linking.h</h3>
<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">/////////////////////////////////////////////////////////////////////////////
// linking_pragmas_static.h
</span>
<span class="c1">// This file is specific to Micrsoft's compiler.
</span>
<span class="cp">#pragma once
</span>
<span class="cp">#if defined(ON_DLL_IMPORTS) || defined(ON_DLL_EXPORTS)
#error This file contains STATIC LIBRARY linking pragmas.
#endif
</span>
<span class="cp">#if defined(WIN64)
</span>
<span class="c1">// x64 (64 bit) static libraries
</span>
<span class="cp">#if defined(NDEBUG)
</span>
<span class="c1">// Release x64 (64 bit) libs
</span><span class="cp">#pragma message( " --- openNURBS Release x64 (64 bit) build." )
#pragma comment(lib, "../opennurbs/zlib/x64/Release/zlibx64.lib")
#pragma comment(lib, "../opennurbs/x64/ReleaseStaticLib/opennurbsx64_static.lib")
</span>
<span class="cp">#else // _DEBUG
</span>
<span class="c1">// Debug x64 (64 bit) libs
</span><span class="cp">#pragma message( " --- openNURBS Debug x64 (64 bit) build." )
#pragma comment(lib, "../opennurbs/zlib/x64/Debug/zlibx64_d.lib")
#pragma comment(lib, "../opennurbs/x64/DebugStaticLib/opennurbsx64_staticd.lib")
</span>
<span class="cp">#endif // NDEBUG else _DEBUG
</span>
<span class="cp">#else // WIN32
</span>
<span class="c1">// x86 (32 bit) static libraries
</span>
<span class="cp">#if defined(NDEBUG)
</span>
<span class="c1">// Release x86 (32 bit) libs
</span><span class="cp">#pragma message( " --- openNURBS Release x86 (32 bit) build." )
#pragma comment(lib, "../opennurbs/zlib/Release/zlib.lib")
#pragma comment(lib, "../opennurbs/ReleaseStaticLib/opennurbs_static.lib")
</span>
<span class="cp">#else // _DEBUG
</span>
<span class="c1">// Debug x86 (32 bit) libs
</span><span class="cp">#pragma message( " --- openNURBS Debug x86 (32 bit) build." )
#pragma comment(lib, "../opennurbs/zlib/Debug/zlib_d.lib")
#pragma comment(lib, "../opennurbs/DebugStaticLib/opennurbs_staticd.lib")
</span>
<span class="cp">#endif // NDEBUG else _DEBUG
</span>
<span class="cp">#endif // WIN64 else WIN32
</span></code></pre>
</div>

<h3 id="opennurbsdynamiclinkingh">opennurbs_dynamic_linking.h</h3>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">/////////////////////////////////////////////////////////////////////////////
// linking_pragmas_static.h
</span>
<span class="c1">// This file is specific to Micrsoft's compiler.
</span>
<span class="cp">#pragma once
</span>
<span class="cp">#if !defined(ON_DLL_IMPORTS)
#error This file contains DYNAMIC LIBRARY linking pragmas.
#endif
</span>
<span class="cp">#if defined(WIN64)
</span>
<span class="c1">// x64 (64 bit) dynamic libraries
</span>
<span class="cp">#if defined(NDEBUG)
</span>
<span class="c1">// Release x64 (64 bit) libs
</span><span class="cp">#pragma message( " --- openNURBS Release x64 (64 bit) build." )
#pragma comment(lib, "../opennurbs/zlib/x64/Release/zlibx64.lib")
#pragma comment(lib, "../opennurbs/x64/Release/opennurbsx64.lib")
</span>
<span class="cp">#else // _DEBUG
</span>
<span class="c1">// Debug x64 (64 bit) libs
</span><span class="cp">#pragma message( " --- openNURBS Debug x64 (64 bit) build." )
#pragma comment(lib, "../opennurbs/zlib/x64/Debug/zlibx64_d.lib")
#pragma comment(lib, "../opennurbs/x64/Debug/opennurbsx64_d.lib")
</span>
<span class="cp">#endif // NDEBUG else _DEBUG
</span>
<span class="cp">#else // WIN32
</span>
<span class="c1">// x86 (32 bit) dynamic libraries
</span>
<span class="cp">#if defined(NDEBUG)
</span>
<span class="c1">// Release x86 (32 bit) libs
</span><span class="cp">#pragma message( " --- openNURBS Release x86 (32 bit) build." )
#pragma comment(lib, "../opennurbs/zlib/Release/zlib.lib")
#pragma comment(lib, "../opennurbs/Release/opennurbs.lib")
</span>
<span class="cp">#else // _DEBUG
</span>
<span class="c1">// Debug x86 (32 bit) libs
</span><span class="cp">#pragma message( " --- openNURBS Debug x86 (32 bit) build." )
#pragma comment(lib, "../opennurbs/zlib/Debug/zlib_d.lib")
#pragma comment(lib, "../opennurbs/Debug/opennurbs_d.lib")
</span>
<span class="cp">#endif // NDEBUG else _DEBUG
</span>
<span class="cp">#endif // WIN64 else WIN32
</span></code></pre>
</div>

<p>To use these headers, just include them to your project’s <em>stdafx.h</em> file like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="c1">// stdafx.h
</span>
<span class="cp">#pragma once
</span>
<span class="cp">#include "targetver.h"
</span>
<span class="cp">#include &lt;stdio.h&gt;
#include &lt;tchar.h&gt;
</span>
<span class="c1">// TODO: reference additional headers your program requires here
</span>
<span class="c1">// Uncomment the following if you want to use the openNURBS dynamic link library
//#define ON_DLL_IMPORTS
</span>
<span class="cp">#include "../opennurbs/opennurbs.h"
</span>
<span class="cp">#if defined(ON_DLL_IMPORTS)
#include "opennurbs_dynamic_linking.h"
#else
#include "opennurbs_static_linking.h"
#endif
</span></code></pre>
</div>

        </article>

      <!--</div>-->

    </div>
</div>
</div>

        <!--/div-->
      </div>

      <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">

      
        <div class="row">
          <div class="col-md-4">
            <p class="text">Author: <a href="mailto:dalelear@mcneel.com">dalelear@mcneel.com</a></p>
          </div>
          <div class="col-md-4 text-center">
            <span class="icon  icon--github">
              <svg viewBox="0 0 16 16">
                <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
              </svg>
            </span>
            <a href="https://github.com/mcneel/developer-rhino3d-com-branches/blob/master/_guide_topics/opennurbs/linking_with_opennurbs.md" target="_blank">Edit page on GitHub</a>
          </div>
            <div class="col-md-4">
              <span class="pull-right">
                <span class="glyphicon glyphicon-cog"></span>&nbsp;<a href="/developer-rhino3d-com-branches/admin">Admin</a>
              </span>
            </div>
        </div>

        <div class="row text-center">
          © 1997 - 2016 Robert McNeel &amp; Associates
        </div>

      

    </div>

  </div>

  <script>
    if (navigator.appVersion.indexOf("Win")!=-1)
    {
      var body = document.getElementsByTagName("body");
      body[0].style.fontWeight = '400';
    }
  </script>

</footer>

    </div>

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <!-- MathJax -->
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    <script type="text/javascript">
    $('body').scrollspy({
        target: '.bs-docs-sidebar',
        offset: 110
    });
    </script>
  </body>

</html>
